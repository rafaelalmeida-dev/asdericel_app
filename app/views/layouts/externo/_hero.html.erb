<section class="py-4" style="background-color: #f8f9fa;">
  <div class="container">
    <div class="row g-4">
      <!-- Coluna do Carrossel -->
      <div class="col-lg-8">
        <div id="heroCarousel" class="carousel slide shadow-lg" data-bs-ride="carousel" data-bs-interval="5000">
          <!-- Indicadores -->
          <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
          </div>

          <!-- Slides -->
          <div class="carousel-inner">
            <!-- Slide 1: time.jpg -->
            <div class="carousel-item active">
              <div class="position-relative overflow-hidden" style="background-image: url('<%= asset_path('time.jpg') %>'); background-size: cover; background-position: center; height: 600px;">
                <!-- Overlay -->
                <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(to right, rgba(234, 88, 12, 0.6), rgba(251, 146, 60, 0.6), transparent);"></div>

                <!-- Content -->
                <div class="position-relative h-100 d-flex flex-column justify-content-center px-5">
                  <h2 class="display-4 fw-black text-white mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                    Asdericel - Clube de
                    <br />
                    Campeões
                  </h2>

                  <p class="fs-5 text-info fw-bold fst-italic mb-4" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                    O maior campeão do estado de
                    <br />
                    Rondônia
                  </p>

                  <%= link_to doacoes_path, class: "btn btn-dark btn-lg fw-bold d-inline-flex align-items-center gap-2 shadow-lg", style: "transition: background-color 0.3s; width: fit-content;" do %>
                    JUNTE-SE A NÓS
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M5 12h14" />
                      <path d="M12 5l7 7-7 7" />
                    </svg>
                  <% end %>
                </div>
              </div>
            </div>

            <!-- Slide 2: junte-se.png -->
            <div class="carousel-item">
              <div class="position-relative overflow-hidden" style="background-image: url('<%= asset_path('junte-se.png') %>'); background-size: cover; background-position: center; height: 600px;">
                <!-- Overlay -->
                <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(to right, rgba(26, 58, 125, 0.5), rgba(230, 126, 34, 0.5), transparent);"></div>

                <!-- Content -->
                <div class="position-relative h-100 d-flex flex-column justify-content-center px-5">
                  <h2 class="display-4 fw-black text-white mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                    Junte-se ao
                    <br />
                    Time Campeão
                  </h2>

                  <p class="fs-5 text-white fw-bold fst-italic mb-4" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                    Faça parte da história da
                    <br />
                    Asdericel
                  </p>

                  <%= link_to doacoes_path, class: "btn btn-warning btn-lg fw-bold d-inline-flex align-items-center gap-2 shadow-lg", style: "transition: background-color 0.3s; width: fit-content;" do %>
                    SAIBA MAIS
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M5 12h14" />
                      <path d="M12 5l7 7-7 7" />
                    </svg>
                  <% end %>
                </div>
              </div>
            </div>
          </div>

          <!-- Controles -->
          <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Próximo</span>
          </button>
        </div>
      </div>

      <!-- Coluna de Notícias -->
      <div class="col-lg-4">
        <div class="h-100 d-flex flex-column">
          <h3 class="fw-bold mb-3" style="color: #1a3a7d;">ÚLTIMAS NOTÍCIAS</h3>
          
          <% noticias_recentes = Noticia.recentes.limit(4) %>
          <% if noticias_recentes.any? %>
            <% noticias_recentes.each do |noticia| %>
              <%= link_to noticia_publico_path(noticia), class: "text-decoration-none" do %>
                <div class="card mb-3 border-0 shadow-sm hover-news">
                  <div class="row g-0">
                    <div class="col-4">
                      <% imagem_src = noticia.imagem_upload.attached? ? noticia.imagem_upload : (noticia.imagem.presence || "2001.png") %>
                      <%= image_tag imagem_src, class: "img-fluid h-100", style: "object-fit: cover;", alt: noticia.titulo %>
                    </div>
                    <div class="col-8">
                      <div class="card-body p-3">
                        <span class="badge mb-2" style="background-color: <%= categoria_cor(noticia.categoria) %>;">
                          <%= noticia.categoria %>
                        </span>
                        <h6 class="card-title fw-bold mb-1" style="font-size: 0.9rem; line-height: 1.3; color: #1a3a7d;">
                          <%= truncate(noticia.titulo, length: 60) %>
                        </h6>
                        <p class="card-text text-muted mb-0" style="font-size: 0.75rem;">
                          <i class="ph ph-clock me-1"></i><%= time_ago_in_words(noticia.data_publicacao) %> atrás
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              <% end %>
            <% end %>
          <% else %>
            <!-- Notícias de exemplo caso não haja notícias cadastradas -->
            <div class="card mb-3 border-0 shadow-sm">
              <div class="card-body text-center py-5">
                <i class="ph ph-newspaper" style="font-size: 3rem; color: #d1d5db;"></i>
                <p class="text-muted mt-3 mb-0">Nenhuma notícia cadastrada ainda.</p>
              </div>
            </div>
          <% end %>

          <!-- Botão Ver Mais -->
          <%= link_to noticias_publico_path, class: "btn btn-outline-primary btn-sm fw-bold mt-auto" do %>
            VER TODAS AS NOTÍCIAS
            <i class="ph ph-arrow-right ms-2"></i>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .hover-news {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  
  .hover-news:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15) !important;
  }
  
  @media (max-width: 991px) {
    #heroCarousel .carousel-item > div {
      height: 400px !important;
    }
  }
</style>
